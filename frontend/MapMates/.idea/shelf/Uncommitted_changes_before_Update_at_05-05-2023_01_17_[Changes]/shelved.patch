Index: app/src/main/java/com/example/mapmates/ui/home/HomeFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.mapmates.ui.home\r\n\r\nimport android.content.Context\r\nimport android.graphics.Bitmap\r\nimport android.graphics.Canvas\r\nimport android.graphics.Color\r\nimport android.graphics.drawable.BitmapDrawable\r\nimport android.graphics.drawable.Drawable\r\nimport android.location.Location\r\nimport android.os.Bundle\r\nimport android.print.PrintAttributes.Resolution\r\nimport android.util.Log\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.ImageButton\r\nimport android.widget.Toast\r\nimport androidx.annotation.DrawableRes\r\nimport androidx.appcompat.content.res.AppCompatResources\r\nimport androidx.fragment.app.Fragment\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.example.mapmates.R\r\nimport com.example.mapmates.databinding.FragmentHomeBinding\r\nimport com.example.mapmates.utils.LocationPermissionHelper\r\nimport com.google.android.material.bottomsheet.BottomSheetBehavior\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog\r\nimport com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton\r\nimport com.mapbox.android.gestures.MoveGestureDetector\r\nimport com.mapbox.geojson.Point\r\nimport com.mapbox.maps.*\r\nimport com.mapbox.maps.extension.style.expressions.dsl.generated.interpolate\r\nimport com.mapbox.maps.extension.style.expressions.generated.Expression.Companion.linear\r\nimport com.mapbox.maps.plugin.LocationPuck2D\r\nimport com.mapbox.maps.plugin.animation.camera\r\nimport com.mapbox.maps.plugin.annotation.annotations\r\nimport com.mapbox.maps.plugin.annotation.generated.PointAnnotationManager\r\nimport com.mapbox.maps.plugin.annotation.generated.PointAnnotationOptions\r\nimport com.mapbox.maps.plugin.annotation.generated.createPointAnnotationManager\r\nimport com.mapbox.maps.plugin.compass.compass\r\nimport com.mapbox.maps.plugin.gestures.OnMoveListener\r\nimport com.mapbox.maps.plugin.gestures.gestures\r\nimport com.mapbox.maps.plugin.locationcomponent.OnIndicatorBearingChangedListener\r\nimport com.mapbox.maps.plugin.locationcomponent.OnIndicatorPositionChangedListener\r\nimport com.mapbox.maps.plugin.locationcomponent.location\r\nimport com.mapbox.maps.plugin.scalebar.scalebar\r\nimport com.mapbox.maps.viewannotation.ViewAnnotationManager\r\nimport java.lang.ref.WeakReference\r\nclass HomeFragment : Fragment(), OnItemClickListener {\r\n    private lateinit var mapView: MapView\r\n    private lateinit var pointAnnotationManager: PointAnnotationManager\r\n    private lateinit var homeViewModel: HomeViewModel\r\n    private var _binding: FragmentHomeBinding? = null\r\n    private val binding get() = _binding!!\r\n    private lateinit var groupsList: ArrayList<GroupModel>\r\n    private lateinit var groupsRecyclerView: RecyclerView\r\n    private lateinit var groupSheetDialog: BottomSheetDialog\r\n    private lateinit var markerSheetDialog: BottomSheetDialog\r\n    private var mapLoaded: Boolean = false\r\n\r\n    private lateinit var locationPermissionHelper : LocationPermissionHelper\r\n\r\n\r\n    private val onIndicatorPositionChangedListener = OnIndicatorPositionChangedListener {\r\n        mapView.getMapboxMap().setCamera(CameraOptions.Builder().center(it).build())\r\n        mapView.gestures.focalPoint = mapView.getMapboxMap().pixelForCoordinate(it)\r\n    }\r\n\r\n    private val onMoveListener = object : OnMoveListener {\r\n        override fun onMoveBegin(detector: MoveGestureDetector) {\r\n            onCameraTrackingDismissed()\r\n        }\r\n\r\n        override fun onMove(detector: MoveGestureDetector): Boolean {\r\n            return false\r\n        }\r\n\r\n        override fun onMoveEnd(detector: MoveGestureDetector) {}\r\n    }\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?\r\n    ): View {\r\n        homeViewModel =\r\n            ViewModelProvider(this).get(HomeViewModel::class.java)\r\n\r\n        _binding = FragmentHomeBinding.inflate(inflater, container, false)\r\n        val root: View = binding.root\r\n\r\n        mapView = binding.mapView\r\n        locationPermissionHelper = LocationPermissionHelper(WeakReference(requireActivity()))\r\n        locationPermissionHelper.checkPermissions {\r\n            onMapReady()\r\n        }\r\n        groupsList = ArrayList<GroupModel>()\r\n        // TODO: Dynamic groupsList\r\n        // initialize groupsList with GROUP Names\r\n        groupsList.add(GroupModel(\"Friends\", \"420\", R.drawable.ic_profile))\r\n        groupsList.add(GroupModel(\"Group 1\", \"3\", R.drawable.ic_map))\r\n        groupsList.add(GroupModel(\"Group 2\", \"15\", R.drawable.ic_home))\r\n        groupsList.add(GroupModel(\"Group 3\", \"30\", R.drawable.ic_profile))\r\n        groupsList.add(GroupModel(\"Group 4\", \"69\", R.drawable.ic_map))\r\n\r\n        pointAnnotationManager = mapView.annotations.createPointAnnotationManager()\r\n\r\n        createBottomGroupDialog()\r\n        createBottomMarkerDialog()\r\n\r\n        pointAnnotationManager.addClickListener {clickedAnnotaton ->\r\n            Toast.makeText(requireContext(), \"Clicked on ${clickedAnnotaton.id}\", Toast.LENGTH_SHORT).show()\r\n            markerSheetDialog.show()\r\n            true\r\n        }\r\n\r\n        // Setting up change group fab\r\n        val groupsFab : ExtendedFloatingActionButton = binding.groupsFab\r\n        groupsFab.setOnClickListener {\r\n            groupSheetDialog.show()\r\n        }\r\n\r\n        // Setting up location fab\r\n        val locationFab : FloatingActionButton = binding.locationFab\r\n        locationFab.setOnClickListener{\r\n            // TODO: get current location and set camera to it\r\n//            val pt\r\n//            mapView.getMapboxMap().setCamera(CameraOptions.Builder().center(pt).build())\r\n//            mapView.gestures.focalPoint = mapView.getMapboxMap().pixelForCoordinate(pt)\r\n        }\r\n\r\n        return root\r\n    }\r\n\r\n    private fun onMapReady() {\r\n        mapView.scalebar.updateSettings {\r\n            enabled = false\r\n        }\r\n        mapView.compass.updateSettings {\r\n            enabled = false\r\n        }\r\n        mapView.getMapboxMap().setCamera(\r\n            CameraOptions.Builder()\r\n                .zoom(14.0)\r\n                .build()\r\n        )\r\n        mapView.getMapboxMap().loadStyleUri(\r\n            Style.MAPBOX_STREETS\r\n        ) {\r\n            initLocationComponent()\r\n            setupGesturesListener()\r\n            mapLoaded = true\r\n            addAnnotationToMap(28.512, 78.234)\r\n        }\r\n    }\r\n    private fun setupGesturesListener() {\r\n        mapView.gestures.addOnMoveListener(onMoveListener)\r\n    }\r\n\r\n    private fun initLocationComponent() {\r\n        val locationComponentPlugin = mapView.location\r\n        locationComponentPlugin.updateSettings {\r\n            this.enabled = true\r\n            this.locationPuck = LocationPuck2D(\r\n                bearingImage = context?.let {\r\n                    AppCompatResources.getDrawable(\r\n                        it,\r\n                        R.drawable.ic_launcher_foreground,\r\n                    )\r\n                },\r\n                scaleExpression = interpolate {\r\n                    linear()\r\n                    zoom()\r\n                    stop {\r\n                        literal(0.0)\r\n                        literal(0.6)\r\n                    }\r\n                    stop {\r\n                        literal(20.0)\r\n                        literal(1.0)\r\n                    }\r\n                }.toJson()\r\n            )\r\n        }\r\n        locationComponentPlugin.addOnIndicatorPositionChangedListener(onIndicatorPositionChangedListener)\r\n    }\r\n\r\n    private fun onCameraTrackingDismissed() {\r\n        mapView.location\r\n            .removeOnIndicatorPositionChangedListener(onIndicatorPositionChangedListener)\r\n        mapView.gestures.removeOnMoveListener(onMoveListener)\r\n    }\r\n\r\n\r\n    override fun onStart() {\r\n        super.onStart()\r\n        mapView.onStart()\r\n    }\r\n\r\n    override fun onStop() {\r\n        super.onStop()\r\n        mapView.onStop()\r\n    }\r\n\r\n\r\n    override fun onDestroyView() {\r\n        super.onDestroyView()\r\n        mapView.location\r\n            .removeOnIndicatorPositionChangedListener(onIndicatorPositionChangedListener)\r\n        mapView.gestures.removeOnMoveListener(onMoveListener)\r\n    }\r\n\r\n    override fun onRequestPermissionsResult(\r\n        requestCode: Int,\r\n        permissions: Array<String>,\r\n        grantResults: IntArray\r\n    ) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n        locationPermissionHelper.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n    }\r\n    override fun onLowMemory() {\r\n        super.onLowMemory()\r\n        mapView.onLowMemory()\r\n    }\r\n\r\n    private fun createBottomGroupDialog() {\r\n        groupSheetDialog = BottomSheetDialog(requireContext())\r\n        groupSheetDialog.setContentView(R.layout.group_sheet_dialog)\r\n//        val behavior = BottomSheetBehavior.from(groupSheetDialog.findViewById(R.id.group_sheet_dialog_parent)!!)\r\n//        behavior.setPeekHeight(900, true)\r\n\r\n        // initialize adapter\r\n        groupsRecyclerView = groupSheetDialog.findViewById(R.id.recycler_view)!!\r\n        groupsRecyclerView.layoutManager = LinearLayoutManager(requireContext())\r\n        groupsRecyclerView.setHasFixedSize(true)\r\n        val adapter = GroupsAdapter(groupsList, this)\r\n        groupsRecyclerView.adapter = adapter\r\n\r\n\r\n        val closeButton : ImageButton = groupSheetDialog.findViewById(R.id.closeDialog)!!\r\n\r\n        closeButton.setOnClickListener {\r\n            groupSheetDialog.dismiss()\r\n        }\r\n    }\r\n    private fun createBottomMarkerDialog() {\r\n        markerSheetDialog = BottomSheetDialog(requireContext())\r\n        markerSheetDialog.setContentView(R.layout.marker_sheet_dialog)\r\n        val closeButton : ImageButton = markerSheetDialog.findViewById(R.id.closeDialog)!!\r\n\r\n        closeButton.setOnClickListener {\r\n            markerSheetDialog.dismiss()\r\n        }\r\n    }\r\n\r\n    override fun onItemClick(position: Int) {\r\n        binding.groupsFab.text = groupsList[position].groupName\r\n        // iterate over viewholder in groupRecylcerView and set background to white\r\n        for (i in 0 until groupsRecyclerView.childCount) {\r\n            val holder = groupsRecyclerView.getChildViewHolder(groupsRecyclerView.getChildAt(i))\r\n            if(i == position) {\r\n                // select\r\n                holder.itemView.setBackgroundColor(Color.RED)\r\n                groupsList[i].isShowing = true\r\n            }\r\n            else {\r\n                // deselect\r\n                holder.itemView.setBackgroundColor(Color.WHITE)\r\n                groupsList[i].isShowing = false\r\n            }\r\n        }\r\n        // reset markers\r\n        pointAnnotationManager.deleteAll()\r\n        addAnnotationToMap(28.613, 77.209)\r\n        groupSheetDialog.dismiss()\r\n    }\r\n\r\n    // Adding marker logics\r\n    private fun addAnnotationToMap(latitude: Double, longitude: Double) {\r\n// Create an instance of the Annotation API and get the PointAnnotationManager.\r\n        bitmapFromDrawableRes(\r\n            requireContext(),\r\n            R.drawable.ic_profile\r\n        )?.let {\r\n            // Set options for the resulting symbol layer.\r\n            val pointAnnotationOptions: PointAnnotationOptions = PointAnnotationOptions()\r\n                // Define a geographic coordinate.\r\n                .withPoint(Point.fromLngLat( longitude, latitude))\r\n                // Specify the bitmap you assigned to the point annotation\r\n                // The bitmap will be added to map style automatically.\r\n                .withIconImage(it)\r\n            // Add the resulting pointAnnotation to the map.\r\n            val pointAnnotation = pointAnnotationManager.create(pointAnnotationOptions)\r\n        }\r\n    }\r\n    private fun bitmapFromDrawableRes(context: Context, @DrawableRes resourceId: Int) =\r\n        convertDrawableToBitmap(AppCompatResources.getDrawable(context, resourceId))\r\n    private fun convertDrawableToBitmap(sourceDrawable: Drawable?): Bitmap? {\r\n        if (sourceDrawable == null) {\r\n            return null\r\n        }\r\n        return if (sourceDrawable is BitmapDrawable) {\r\n            sourceDrawable.bitmap\r\n        } else {\r\n            // copying drawable object to not manipulate on the same reference\r\n            val constantState = sourceDrawable.constantState ?: return null\r\n            val drawable = constantState.newDrawable().mutate()\r\n            val bitmap: Bitmap = Bitmap.createBitmap(\r\n                drawable.intrinsicWidth, drawable.intrinsicHeight,\r\n                Bitmap.Config.ARGB_8888\r\n            )\r\n            val canvas = Canvas(bitmap)\r\n            drawable.setBounds(0, 0, canvas.width, canvas.height)\r\n            drawable.draw(canvas)\r\n            bitmap\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/mapmates/ui/home/HomeFragment.kt b/app/src/main/java/com/example/mapmates/ui/home/HomeFragment.kt
--- a/app/src/main/java/com/example/mapmates/ui/home/HomeFragment.kt	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/java/com/example/mapmates/ui/home/HomeFragment.kt	(date 1683224048743)
@@ -1,5 +1,6 @@
 package com.example.mapmates.ui.home
 
+import android.annotation.SuppressLint
 import android.content.Context
 import android.graphics.Bitmap
 import android.graphics.Canvas
@@ -13,21 +14,23 @@
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
-import android.widget.ImageButton
-import android.widget.Toast
+import android.widget.*
 import androidx.annotation.DrawableRes
 import androidx.appcompat.content.res.AppCompatResources
 import androidx.fragment.app.Fragment
 import androidx.lifecycle.ViewModelProvider
+import androidx.lifecycle.lifecycleScope
 import androidx.recyclerview.widget.LinearLayoutManager
 import androidx.recyclerview.widget.RecyclerView
 import com.example.mapmates.R
 import com.example.mapmates.databinding.FragmentHomeBinding
+import com.example.mapmates.utils.JsonParserHelper
 import com.example.mapmates.utils.LocationPermissionHelper
 import com.google.android.material.bottomsheet.BottomSheetBehavior
 import com.google.android.material.bottomsheet.BottomSheetDialog
 import com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
 import com.google.android.material.floatingactionbutton.FloatingActionButton
+import com.google.gson.JsonParser
 import com.mapbox.android.gestures.MoveGestureDetector
 import com.mapbox.geojson.Point
 import com.mapbox.maps.*
@@ -47,22 +50,33 @@
 import com.mapbox.maps.plugin.locationcomponent.location
 import com.mapbox.maps.plugin.scalebar.scalebar
 import com.mapbox.maps.viewannotation.ViewAnnotationManager
+import com.squareup.picasso.Picasso
+import kotlinx.coroutines.GlobalScope
+import kotlinx.coroutines.launch
+import okhttp3.*
+import org.json.JSONObject
+import timber.log.Timber
+import java.io.IOException
 import java.lang.ref.WeakReference
-class HomeFragment : Fragment(), OnItemClickListener {
+import java.util.concurrent.CountDownLatch
+
+class HomeFragment : Fragment(), OnGroupItemClickListener {
     private lateinit var mapView: MapView
     private lateinit var pointAnnotationManager: PointAnnotationManager
     private lateinit var homeViewModel: HomeViewModel
     private var _binding: FragmentHomeBinding? = null
     private val binding get() = _binding!!
     private lateinit var groupsList: ArrayList<GroupModel>
+    private lateinit var markersList: ArrayList<MarkerModel>
+    private lateinit var markerIdList: ArrayList<Long>
     private lateinit var groupsRecyclerView: RecyclerView
     private lateinit var groupSheetDialog: BottomSheetDialog
     private lateinit var markerSheetDialog: BottomSheetDialog
     private var mapLoaded: Boolean = false
+    private var currentMarker: Int = -1
 
     private lateinit var locationPermissionHelper : LocationPermissionHelper
 
-
     private val onIndicatorPositionChangedListener = OnIndicatorPositionChangedListener {
         mapView.getMapboxMap().setCamera(CameraOptions.Builder().center(it).build())
         mapView.gestures.focalPoint = mapView.getMapboxMap().pixelForCoordinate(it)
@@ -83,9 +97,7 @@
     override fun onCreateView(
         inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
     ): View {
-        homeViewModel =
-            ViewModelProvider(this).get(HomeViewModel::class.java)
-
+        homeViewModel = ViewModelProvider(this).get(HomeViewModel::class.java)
         _binding = FragmentHomeBinding.inflate(inflater, container, false)
         val root: View = binding.root
 
@@ -95,22 +107,19 @@
             onMapReady()
         }
         groupsList = ArrayList<GroupModel>()
-        // TODO: Dynamic groupsList
-        // initialize groupsList with GROUP Names
-        groupsList.add(GroupModel("Friends", "420", R.drawable.ic_profile))
-        groupsList.add(GroupModel("Group 1", "3", R.drawable.ic_map))
-        groupsList.add(GroupModel("Group 2", "15", R.drawable.ic_home))
-        groupsList.add(GroupModel("Group 3", "30", R.drawable.ic_profile))
-        groupsList.add(GroupModel("Group 4", "69", R.drawable.ic_map))
+        markersList = ArrayList<MarkerModel>()
+        markerIdList = ArrayList<Long>()
 
         pointAnnotationManager = mapView.annotations.createPointAnnotationManager()
 
         createBottomGroupDialog()
+        getGroupDetails("Aflah")
         createBottomMarkerDialog()
 
         pointAnnotationManager.addClickListener {clickedAnnotaton ->
             Toast.makeText(requireContext(), "Clicked on ${clickedAnnotaton.id}", Toast.LENGTH_SHORT).show()
             markerSheetDialog.show()
+            updateMarkerPage(clickedAnnotaton.id)
             true
         }
 
@@ -132,6 +141,185 @@
         return root
     }
 
+    private fun createBottomGroupDialog() {
+        groupSheetDialog = BottomSheetDialog(requireContext())
+        groupSheetDialog.setContentView(R.layout.group_sheet_dialog)
+        groupSheetDialog.behavior.state = BottomSheetBehavior.STATE_EXPANDED
+
+        // initialize adapter
+        groupsRecyclerView = groupSheetDialog.findViewById(R.id.recycler_view)!!
+        groupsRecyclerView.layoutManager = LinearLayoutManager(requireContext())
+        groupsRecyclerView.setHasFixedSize(true)
+        val adapter = GroupsAdapter(groupsList, this)
+        groupsRecyclerView.adapter = adapter
+
+        val closeButton : ImageButton = groupSheetDialog.findViewById(R.id.closeDialog)!!
+
+        closeButton.setOnClickListener {
+            groupSheetDialog.dismiss()
+        }
+    }
+
+    private fun createBottomMarkerDialog() {
+        markerSheetDialog = BottomSheetDialog(requireContext())
+        markerSheetDialog.setContentView(R.layout.marker_sheet_dialog)
+        val closeButton : ImageButton = markerSheetDialog.findViewById(R.id.closeDialog)!!
+        val viewFlipper: ViewFlipper = markerSheetDialog.findViewById(R.id.viewFlipper)!!
+        val markerName: TextView = markerSheetDialog.findViewById(R.id.markerHeading)!!
+        val prevImage: FloatingActionButton = markerSheetDialog.findViewById(R.id.floatingActionButtonPrev)!!
+        val nextImage: FloatingActionButton = markerSheetDialog.findViewById(R.id.floatingActionButtonNext)!!
+        val imageBy: TextView = markerSheetDialog.findViewById(R.id.imageBy)!!
+
+        prevImage.setOnClickListener {
+            // get id
+            viewFlipper.showPrevious()
+            // check if currentMarker within range
+            if(currentMarker in 0 until markersList.size)
+                if(viewFlipper.displayedChild in 0 until markersList[currentMarker].imageUploaders.size)
+                    imageBy.text = markersList[currentMarker].imageUploaders[viewFlipper.displayedChild]
+        }
+        nextImage.setOnClickListener {
+            viewFlipper.showNext()
+            if(currentMarker in 0 until markersList.size)
+                if(viewFlipper.displayedChild in 0 until markersList[currentMarker].imageUploaders.size)
+                    imageBy.text = markersList[currentMarker].imageUploaders[viewFlipper.displayedChild]
+        }
+
+        closeButton.setOnClickListener {
+            markerSheetDialog.dismiss()
+        }
+    }
+
+    override fun onGroupItemClick(position: Int) {
+        binding.groupsFab.text = groupsList[position].groupName
+        // iterate over viewholder in groupRecylcerView and set background to white
+        for (i in 0 until groupsRecyclerView.childCount) {
+            val holder = groupsRecyclerView.getChildViewHolder(groupsRecyclerView.getChildAt(i))
+            if(i == position) {
+                // select
+                holder.itemView.findViewById<TextView>(R.id.groupName).setTextColor(Color.DKGRAY)
+                // get groupName
+                groupsList[i].isShowing = true
+            }
+            else {
+                // deselect
+                holder.itemView.findViewById<TextView>(R.id.groupName).setTextColor(Color.GRAY)
+                groupsList[i].isShowing = false
+            }
+        }
+        // reset markers
+        pointAnnotationManager.deleteAll()
+        markersList.clear()
+        markerIdList.clear()
+        getAndUpdateMarkerDetails(groupsList[position].groupId)
+        groupSheetDialog.dismiss()
+    }
+
+    private fun getGroupDetails(username: String) {
+        var responseString : String? = null
+        val client = OkHttpClient()
+        val request = Request.Builder()
+            .url("https://mapsapp-1-m9050519.deta.app/users/$username/all_group_details")
+            .build()
+        client.newCall(request).enqueue(object : Callback {
+            override fun onFailure(call: Call, e: IOException) {
+                Timber.tag("groups").e(e.message.toString())
+                Toast.makeText(requireContext(), e.message.toString(), Toast.LENGTH_SHORT).show()
+            }
+            @SuppressLint("NotifyDataSetChanged")
+            override fun onResponse(call: Call, response: Response) {
+                responseString = response.body?.string()
+                if (!response.isSuccessful) {
+                    return
+                }
+                groupsList = JsonParserHelper().parseGroupsDataJson(responseString!!)
+                groupsList.add(0, GroupModel("friends", "Friends", "420", R.drawable.ic_profile))
+                // Run on UI thread
+                requireActivity().runOnUiThread {
+                    // Add friendsList
+                    val adapter = GroupsAdapter(groupsList, this@HomeFragment)
+                    groupsRecyclerView.adapter = adapter
+                }
+
+                Timber.tag("Groups").i(responseString.toString())
+            }
+        }
+        )
+    }
+
+    private fun updateMarkerPage(matchId: Long) {
+        var idx = -1
+        for (i in 0 until markerIdList.size){
+            if(markerIdList[i] == matchId){
+                idx = i
+            }
+        }
+        currentMarker = idx
+        if(idx == -1) return
+        val markerName: TextView = markerSheetDialog.findViewById(R.id.markerHeading)!!
+        val viewFlipper: ViewFlipper = markerSheetDialog.findViewById(R.id.viewFlipper)!!
+        viewFlipper.removeAllViews()
+        markerName.text = markersList[idx].name
+        GlobalScope.launch{
+            val imageBitmaps = mutableListOf<Bitmap>()
+
+            for (imageAt in markersList[idx].images) {
+                val imageUrl = "https://mapsapp-1-m9050519.deta.app/users/$imageAt/marker_image"
+                val bitmap = Picasso.get().load(imageUrl).get()
+                imageBitmaps.add(bitmap)
+            }
+
+            // Update the ViewFlipper in the UI thread
+            requireActivity().runOnUiThread {
+                if(currentMarker == idx){
+                    for (bitmap in imageBitmaps) {
+                        val imageView = ImageView(context)
+                        imageView.setImageBitmap(bitmap)
+                        val layoutParams = FrameLayout.LayoutParams(
+                            FrameLayout.LayoutParams.MATCH_PARENT,
+                            FrameLayout.LayoutParams.WRAP_CONTENT
+                        )
+                        imageView.layoutParams = layoutParams
+                        viewFlipper.addView(imageView)
+                    }
+                }
+            }
+        }
+    }
+    private fun getAndUpdateMarkerDetails(groupId: String) {
+        if(groupId == "friends") {
+            return
+        }
+        var responseString : String? = null
+        val client = OkHttpClient()
+        val request = Request.Builder()
+            .url("https://mapsapp-1-m9050519.deta.app/groups/$groupId/markers")
+            .build()
+        client.newCall(request).enqueue(object : Callback {
+            override fun onFailure(call: Call, e: IOException) {
+                Timber.tag("markers").e(e.message.toString())
+                Toast.makeText(requireContext(), e.message.toString(), Toast.LENGTH_SHORT).show()
+            }
+            @SuppressLint("NotifyDataSetChanged")
+            override fun onResponse(call: Call, response: Response) {
+                responseString = response.body?.string()
+                if (!response.isSuccessful) {
+                    return
+                }
+                markersList = JsonParserHelper().parseMarkersDataJson(responseString!!, groupId)
+                // Run on UI thread
+                requireActivity().runOnUiThread {
+                    Toast.makeText(requireContext(), "https://mapsapp-1-m9050519.deta.app/groups/$groupId/markers", Toast.LENGTH_LONG).show()
+                    Toast.makeText(requireContext(), markersList.toString(), Toast.LENGTH_SHORT).show()
+                    for (marker in markersList) {
+                        markerIdList.add(addAnnotationToMap(marker.latitude, marker.longitude))
+                    }
+                }
+
+                Timber.tag("Markers").i(responseString.toString())
+            }
+        })
+    }
     private fun onMapReady() {
         mapView.scalebar.updateSettings {
             enabled = false
@@ -153,6 +341,7 @@
             addAnnotationToMap(28.512, 78.234)
         }
     }
+
     private fun setupGesturesListener() {
         mapView.gestures.addOnMoveListener(onMoveListener)
     }
@@ -191,7 +380,6 @@
         mapView.gestures.removeOnMoveListener(onMoveListener)
     }
 
-
     override fun onStart() {
         super.onStart()
         mapView.onStart()
@@ -202,7 +390,6 @@
         mapView.onStop()
     }
 
-
     override fun onDestroyView() {
         super.onDestroyView()
         mapView.location
@@ -223,61 +410,10 @@
         mapView.onLowMemory()
     }
 
-    private fun createBottomGroupDialog() {
-        groupSheetDialog = BottomSheetDialog(requireContext())
-        groupSheetDialog.setContentView(R.layout.group_sheet_dialog)
-//        val behavior = BottomSheetBehavior.from(groupSheetDialog.findViewById(R.id.group_sheet_dialog_parent)!!)
-//        behavior.setPeekHeight(900, true)
-
-        // initialize adapter
-        groupsRecyclerView = groupSheetDialog.findViewById(R.id.recycler_view)!!
-        groupsRecyclerView.layoutManager = LinearLayoutManager(requireContext())
-        groupsRecyclerView.setHasFixedSize(true)
-        val adapter = GroupsAdapter(groupsList, this)
-        groupsRecyclerView.adapter = adapter
-
-
-        val closeButton : ImageButton = groupSheetDialog.findViewById(R.id.closeDialog)!!
-
-        closeButton.setOnClickListener {
-            groupSheetDialog.dismiss()
-        }
-    }
-    private fun createBottomMarkerDialog() {
-        markerSheetDialog = BottomSheetDialog(requireContext())
-        markerSheetDialog.setContentView(R.layout.marker_sheet_dialog)
-        val closeButton : ImageButton = markerSheetDialog.findViewById(R.id.closeDialog)!!
-
-        closeButton.setOnClickListener {
-            markerSheetDialog.dismiss()
-        }
-    }
-
-    override fun onItemClick(position: Int) {
-        binding.groupsFab.text = groupsList[position].groupName
-        // iterate over viewholder in groupRecylcerView and set background to white
-        for (i in 0 until groupsRecyclerView.childCount) {
-            val holder = groupsRecyclerView.getChildViewHolder(groupsRecyclerView.getChildAt(i))
-            if(i == position) {
-                // select
-                holder.itemView.setBackgroundColor(Color.RED)
-                groupsList[i].isShowing = true
-            }
-            else {
-                // deselect
-                holder.itemView.setBackgroundColor(Color.WHITE)
-                groupsList[i].isShowing = false
-            }
-        }
-        // reset markers
-        pointAnnotationManager.deleteAll()
-        addAnnotationToMap(28.613, 77.209)
-        groupSheetDialog.dismiss()
-    }
-
     // Adding marker logics
-    private fun addAnnotationToMap(latitude: Double, longitude: Double) {
+    private fun addAnnotationToMap(latitude: Double, longitude: Double) : Long {
 // Create an instance of the Annotation API and get the PointAnnotationManager.
+        var annotateId = 0L
         bitmapFromDrawableRes(
             requireContext(),
             R.drawable.ic_profile
@@ -291,7 +427,9 @@
                 .withIconImage(it)
             // Add the resulting pointAnnotation to the map.
             val pointAnnotation = pointAnnotationManager.create(pointAnnotationOptions)
+            annotateId = pointAnnotation.id
         }
+        return annotateId
     }
     private fun bitmapFromDrawableRes(context: Context, @DrawableRes resourceId: Int) =
         convertDrawableToBitmap(AppCompatResources.getDrawable(context, resourceId))
Index: app/src/main/res/layout/list_group_element.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:id=\"@+id/groupElement\"\r\n    android:layout_marginHorizontal=\"30dp\"\r\n    android:layout_marginBottom = \"10dp\"\r\n    android:layout_height=\"90dp\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:gravity=\"center\"\r\n        android:background = \"#FFFFFF\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView\"\r\n            android:layout_width=\"75dp\"\r\n            android:layout_height=\"75dp\"\r\n            android:layout_weight=\"0.5\"\r\n            tools:srcCompat=\"@tools:sample/avatars\" />\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_weight=\"0.5\"\r\n            android:gravity=\"start|center\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/groupName\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"2dp\"\r\n                android:text=\"Group x\"\r\n                android:textSize=\"24sp\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/groupCount\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"15\" />\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/list_group_element.xml b/app/src/main/res/layout/list_group_element.xml
--- a/app/src/main/res/layout/list_group_element.xml	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/res/layout/list_group_element.xml	(date 1683191416509)
@@ -3,52 +3,63 @@
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
+    android:layout_marginHorizontal="20dp"
+    android:layout_marginBottom="10dp"
     android:id="@+id/groupElement"
-    android:layout_marginHorizontal="30dp"
-    android:layout_marginBottom = "10dp"
-    android:layout_height="90dp">
+    android:layout_height="95dp">
+
+    <com.google.android.material.card.MaterialCardView
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_margin="10dp"
+        app:cardCornerRadius="4dp"
+        app:cardElevation="6dp"
+        app:strokeWidth="2dp"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent">
 
-    <LinearLayout
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:gravity="center"
-        android:background = "#FFFFFF"
-        android:orientation="horizontal"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toTopOf="parent">
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:gravity="center"
+            android:orientation="horizontal"
+            app:layout_constraintBottom_toBottomOf="parent"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toTopOf="parent">
 
-        <ImageView
-            android:id="@+id/imageView"
-            android:layout_width="75dp"
-            android:layout_height="75dp"
-            android:layout_weight="0.5"
-            tools:srcCompat="@tools:sample/avatars" />
+            <ImageView
+                android:id="@+id/imageView"
+                android:layout_width="75dp"
+                android:layout_height="75dp"
+                android:layout_marginStart="30dp"
+                android:layout_weight="0.2"
+                tools:srcCompat="@tools:sample/avatars" />
 
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="match_parent"
-            android:layout_marginStart="20dp"
-            android:layout_weight="0.5"
-            android:gravity="start|center"
-            android:orientation="vertical">
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="match_parent"
+                android:layout_marginStart="20dp"
+                android:layout_weight="0.5"
+                android:gravity="start|center"
+                android:orientation="vertical">
 
-            <TextView
-                android:id="@+id/groupName"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:layout_marginTop="2dp"
-                android:text="Group x"
-                android:textSize="24sp" />
+                <TextView
+                    android:id="@+id/groupName"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_marginTop="2dp"
+                    android:text="Group x"
+                    android:textSize="24sp" />
 
-            <TextView
-                android:id="@+id/groupCount"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:text="15" />
-        </LinearLayout>
+                <TextView
+                    android:id="@+id/groupCount"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:text="15" />
+            </LinearLayout>
 
-    </LinearLayout>
+        </LinearLayout>
+    </com.google.android.material.card.MaterialCardView>
 
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/marker_sheet_dialog.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    app:layout_behavior=\"com.google.android.material.bottomsheet.BottomSheetBehavior\"\r\n    android:id=\"@+id/markerSheetDialog\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"700dp\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/closeDialog\"\r\n            style=\"@style/Widget.AppCompat.ImageButton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_margin=\"20dp\"\r\n            android:contentDescription=\"Back Button\"\r\n            android:src=\"@android:drawable/ic_menu_revert\" />\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:fontFamily=\"@font/roboto\"\r\n            android:gravity=\"center\"\r\n            android:padding=\"16dp\"\r\n            android:text=\"Notes\"\r\n            android:textColor=\"@color/purple_500\"\r\n            android:textSize=\"24sp\"\r\n            android:textStyle=\"bold\" />\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <!-- add your content here -->\r\n            <TextView\r\n                android:text=\"Some text comments here\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textSize=\"20sp\"\r\n                android:gravity=\"center\"\r\n                android:padding=\"16dp\"/>\r\n\r\n        </LinearLayout>\r\n\r\n        <TextView\r\n            android:text=\"Images\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:textColor=\"@color/purple_500\"\r\n            android:textSize=\"24sp\"\r\n            android:textStyle=\"bold\"\r\n            android:gravity=\"center\"\r\n            android:padding=\"16dp\"/>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:gravity = 'center'\r\n            android:orientation=\"horizontal\">\r\n\r\n            <!-- add your content here -->\r\n\r\n            <ImageView\r\n                android:id=\"@+id/sampleimageView6\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:src=\"@drawable/ic_launcher_background\"\r\n                />\r\n            <ImageView\r\n                android:id=\"@+id/sampleimageView7\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:src=\"@drawable/ic_launcher_background\"\r\n                />\r\n        </LinearLayout>\r\n\r\n        <TextView\r\n            android:text=\"Visitors\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:textColor=\"@color/purple_500\"\r\n            android:textSize=\"24sp\"\r\n            android:textStyle=\"bold\"\r\n            android:gravity=\"center\"\r\n            android:padding=\"16dp\"/>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:gravity = 'center'\r\n            android:orientation=\"horizontal\">\r\n\r\n            <!-- add your content here -->\r\n\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/marker_sheet_dialog.xml b/app/src/main/res/layout/marker_sheet_dialog.xml
--- a/app/src/main/res/layout/marker_sheet_dialog.xml	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/res/layout/marker_sheet_dialog.xml	(date 1683223556071)
@@ -2,105 +2,232 @@
 <androidx.constraintlayout.widget.ConstraintLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
+    android:layout_width="match_parent"
+    android:layout_height="600dp"
+    android:id="@+id/group_sheet_dialog_parent"
     app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"
-    android:id="@+id/markerSheetDialog"
-    android:layout_width="match_parent"
-    android:layout_height="700dp">
+    xmlns:app="http://schemas.android.com/apk/res-auto">
+
+
+    <androidx.core.widget.NestedScrollView
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent">
+
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:gravity="center|top"
+            android:orientation="vertical"
+            app:layout_constraintTop_toTopOf="parent">
 
-    <LinearLayout
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:orientation="vertical">
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_margin="10dp"
+                android:gravity="center"
+                android:orientation="horizontal">
+
+                <TextView
+                    android:id="@+id/markerHeading"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_margin="10dp"
+                    android:layout_weight="0.9"
+                    android:paddingStart="30dp"
+                    android:text="New Delhi"
+                    android:textAlignment="center"
+                    android:textAllCaps="true"
+                    android:textColor="@color/cardview_dark_background"
+                    android:textSize="30sp" />
 
-        <ImageButton
-            android:id="@+id/closeDialog"
-            style="@style/Widget.AppCompat.ImageButton"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_margin="20dp"
-            android:contentDescription="Back Button"
-            android:src="@android:drawable/ic_menu_revert" />
+                <ImageButton
+                    android:id="@+id/closeDialog"
+                    android:layout_width="wrap_content"
+                    android:layout_height="match_parent"
+                    android:layout_margin="10dp"
+                    android:layout_marginHorizontal="50dp"
+                    android:layout_weight="0.1"
+                    android:background="@android:color/transparent"
+                    app:srcCompat="@android:drawable/ic_menu_close_clear_cancel"
+                    app:tint="@color/black" />
+
+            </LinearLayout>
+
+            <View
+                android:id="@+id/divider2"
+                android:layout_width="match_parent"
+                android:layout_height="5dp"
+                android:layout_marginHorizontal="50dp"
+                android:layout_marginBottom="20dp"
+                android:background="@color/purple_200" />
 
-        <TextView
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:fontFamily="@font/roboto"
-            android:gravity="center"
-            android:padding="16dp"
-            android:text="Notes"
-            android:textColor="@color/purple_500"
-            android:textSize="24sp"
-            android:textStyle="bold" />
+            <TextView
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:fontFamily="@font/roboto"
+                android:gravity="center"
+                android:padding="16dp"
+                android:text="N O T E S"
+                android:textColor="@color/cardview_dark_background"
+                android:textSize="24sp"
+                android:textStyle="bold" />
 
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:orientation="vertical">
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:orientation="vertical">
 
-            <!-- add your content here -->
-            <TextView
-                android:text="Some text comments here"
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content"
-                android:textSize="20sp"
-                android:gravity="center"
-                android:padding="16dp"/>
+                <!-- add your content here -->
+                <androidx.cardview.widget.CardView
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_margin="16dp"
+                    android:elevation="6dp"
+                    android:padding="16dp"
+                    app:cardCornerRadius="6dp">
+
+
+                    <androidx.constraintlayout.widget.ConstraintLayout
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:orientation="vertical">
+                        <!-- Quote TextView -->
+                        <TextView
+                            android:id="@+id/comment_text_view"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:text='"Main comment goes here"'
+                            android:textColor="@android:color/black"
+                            android:textSize="20sp"
+                            android:textStyle="italic"
+                            app:layout_constraintBottom_toBottomOf="parent"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toTopOf="parent" />
+
+                        <!-- Author TextView -->
+                        <TextView
+                            android:id="@+id/author_text_view"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_margin="8dp"
+                            android:text="Author Name"
+                            android:textColor="@android:color/darker_gray"
+                            android:textSize="14sp"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintTop_toBottomOf="@+id/comment_text_view" />
+                    </androidx.constraintlayout.widget.ConstraintLayout>
+
+                </androidx.cardview.widget.CardView>
+
 
-        </LinearLayout>
+            </LinearLayout>
 
-        <TextView
-            android:text="Images"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:textColor="@color/purple_500"
-            android:textSize="24sp"
-            android:textStyle="bold"
-            android:gravity="center"
-            android:padding="16dp"/>
+            <TextView
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:gravity="center"
+                android:padding="16dp"
+                android:text="I M A G E S"
+                android:textColor="@color/cardview_dark_background"
+                android:textSize="24sp"
+                android:textStyle="bold" />
 
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:gravity = 'center'
-            android:orientation="horizontal">
+            <androidx.constraintlayout.widget.ConstraintLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                >
 
-            <!-- add your content here -->
+                <!-- add your content here -->
 
-            <ImageView
-                android:id="@+id/sampleimageView6"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:layout_margin="10dp"
-                android:src="@drawable/ic_launcher_background"
-                />
-            <ImageView
-                android:id="@+id/sampleimageView7"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:layout_margin="10dp"
-                android:src="@drawable/ic_launcher_background"
-                />
-        </LinearLayout>
+                <ViewFlipper
+                    android:id="@+id/viewFlipper"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_margin="10dp"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toTopOf="parent">
+
+                    <ImageView
+                        android:id="@+id/sampleimageView6"
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:layout_margin="10dp"
+                        android:src="@drawable/ic_launcher_background" />
+
+                </ViewFlipper>
+
+                <com.google.android.material.floatingactionbutton.FloatingActionButton
+                    android:id="@+id/floatingActionButtonPrev"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_margin="20dp"
+                    android:clickable="true"
+                    android:contentDescription="Prev"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toBottomOf="@+id/viewFlipper"
+                    app:srcCompat="?attr/actionModeCloseDrawable" />
+
+                <com.google.android.material.floatingactionbutton.FloatingActionButton
+                    android:id="@+id/floatingActionButtonNext"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_margin="20dp"
+                    android:clickable="true"
+                    android:contentDescription="Prev"
+                    android:rotation="180"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintTop_toBottomOf="@+id/viewFlipper"
+                    app:srcCompat="?attr/actionModeCloseDrawable" />
+
+                <TextView
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_marginBottom="10dp"
+                    android:id="@+id/imageBy"
+                    android:text="0/0"
+                    android:textSize="16sp"
+                    app:layout_constraintBottom_toBottomOf="parent"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toBottomOf="@+id/floatingActionButtonPrev" />
+
+            </androidx.constraintlayout.widget.ConstraintLayout>
 
-        <TextView
-            android:text="Visitors"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:textColor="@color/purple_500"
-            android:textSize="24sp"
-            android:textStyle="bold"
-            android:gravity="center"
-            android:padding="16dp"/>
+            <TextView
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:gravity="center"
+                android:padding="16dp"
+                android:layout_marginTop="10dp"
+                android:text="V I S I T O R S"
+                android:textColor="@color/cardview_dark_background"
+                android:textSize="24sp"
+                android:textStyle="bold" />
 
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:gravity = 'center'
-            android:orientation="horizontal">
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:gravity='center'
+                android:orientation="horizontal">
 
-            <!-- add your content here -->
+                <!-- add your content here -->
 
-        </LinearLayout>
-    </LinearLayout>
-</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
+            </LinearLayout>
+
+            <View
+                android:id="@+id/divider3"
+                android:layout_width="match_parent"
+                android:layout_height="5dp"
+                android:layout_marginHorizontal="50dp"
+                android:layout_marginTop="10dp"
+                android:background="@color/purple_200" />
+
+        </LinearLayout>
+    </androidx.core.widget.NestedScrollView>
+
+</androidx.constraintlayout.widget.ConstraintLayout>
Index: app/src/main/res/layout/group_sheet_dialog.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"600dp\"\r\n    android:id=\"@+id/group_sheet_dialog_parent\"\r\n    android:background=\"#EEEEFF\"\r\n    app:layout_behavior=\"com.google.android.material.bottomsheet.BottomSheetBehavior\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity = \"center\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:gravity = \"center\"\r\n            android:layout_weight=\"0.9\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:layout_weight=\"0.9\"\r\n                android:text=\"Groups\"\r\n                android:textAlignment=\"center\"\r\n                android:textSize=\"30sp\" />\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/closeDialog\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_margin=\"10dp\"\r\n                android:layout_weight=\"0.1\"\r\n                android:layout_marginHorizontal=\"50dp\"\r\n                android:background=\"@android:color/transparent\"\r\n                app:srcCompat=\"@android:drawable/ic_menu_close_clear_cancel\"\r\n                app:tint=\"@color/black\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/recycler_view\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_weight=\"0.1\"\r\n            android:layout_height=\"match_parent\" />\r\n\r\n    </LinearLayout>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/group_sheet_dialog.xml b/app/src/main/res/layout/group_sheet_dialog.xml
--- a/app/src/main/res/layout/group_sheet_dialog.xml	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/res/layout/group_sheet_dialog.xml	(date 1683216462678)
@@ -5,22 +5,23 @@
     android:layout_width="match_parent"
     android:layout_height="600dp"
     android:id="@+id/group_sheet_dialog_parent"
-    android:background="#EEEEFF"
     app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"
     xmlns:app="http://schemas.android.com/apk/res-auto">
 
 
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:gravity = "center"
-        android:orientation="vertical">
+        android:layout_height="wrap_content"
+        android:gravity="center|top"
+        android:orientation="vertical"
+        app:layout_constraintTop_toTopOf="parent">
+
 
         <LinearLayout
             android:layout_width="match_parent"
-            android:layout_height="match_parent"
-            android:gravity = "center"
-            android:layout_weight="0.9"
+            android:layout_height="wrap_content"
+            android:layout_margin="10dp"
+            android:gravity="center"
             android:orientation="horizontal">
 
             <TextView
@@ -29,8 +30,10 @@
                 android:layout_height="wrap_content"
                 android:layout_margin="10dp"
                 android:layout_weight="0.9"
-                android:text="Groups"
+                android:paddingStart="30dp"
+                android:text="S P A C E S"
                 android:textAlignment="center"
+                android:textColor="@color/cardview_dark_background"
                 android:textSize="30sp" />
 
             <ImageButton
@@ -38,18 +41,40 @@
                 android:layout_width="wrap_content"
                 android:layout_height="match_parent"
                 android:layout_margin="10dp"
+                android:layout_marginHorizontal="50dp"
                 android:layout_weight="0.1"
-                android:layout_marginHorizontal="50dp"
                 android:background="@android:color/transparent"
                 app:srcCompat="@android:drawable/ic_menu_close_clear_cancel"
                 app:tint="@color/black" />
+
         </LinearLayout>
 
-        <androidx.recyclerview.widget.RecyclerView
-            android:id="@+id/recycler_view"
+        <View
+            android:id="@+id/divider2"
+            android:layout_width="match_parent"
+            android:layout_height="5dp"
+            android:layout_marginHorizontal="50dp"
+            android:layout_marginBottom="20dp"
+            android:background="@color/purple_200" />
+
+        <androidx.core.widget.NestedScrollView
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content">
+            <androidx.recyclerview.widget.RecyclerView
+                android:id="@+id/recycler_view"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content">
+
+            </androidx.recyclerview.widget.RecyclerView>
+        </androidx.core.widget.NestedScrollView>
+
+        <View
+            android:id="@+id/divider3"
             android:layout_width="match_parent"
-            android:layout_weight="0.1"
-            android:layout_height="match_parent" />
+            android:layout_height="5dp"
+            android:layout_marginHorizontal="50dp"
+            android:layout_marginTop="10dp"
+            android:background="@color/purple_200" />
 
     </LinearLayout>
 
Index: app/src/main/java/com/example/mapmates/ui/home/GroupModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.mapmates.ui.home\r\n\r\ndata class GroupModel(val groupName: String, val groupCount: String, val groupImage: Int, var isShowing: Boolean = false) {\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/mapmates/ui/home/GroupModel.kt b/app/src/main/java/com/example/mapmates/ui/home/GroupModel.kt
--- a/app/src/main/java/com/example/mapmates/ui/home/GroupModel.kt	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/java/com/example/mapmates/ui/home/GroupModel.kt	(date 1683199675520)
@@ -1,4 +1,4 @@
 package com.example.mapmates.ui.home
 
-data class GroupModel(val groupName: String, val groupCount: String, val groupImage: Int, var isShowing: Boolean = false) {
+data class GroupModel(val groupId: String, val groupName: String, val groupCount: String, val groupImage: Int, var isShowing: Boolean = false) {
 }
Index: app/src/main/java/com/example/mapmates/ui/home/GroupsAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.mapmates.ui.home\r\n\r\nimport android.graphics.Color\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.constraintlayout.widget.ConstraintLayout\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.example.mapmates.R\r\n\r\nclass GroupsAdapter(private val groupsList: ArrayList<GroupModel>, private val listener: OnItemClickListener) : RecyclerView.Adapter<GroupsAdapter.GroupsViewHolder>() {\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): GroupsViewHolder {\r\n        val itemView = LayoutInflater.from(parent.context).inflate(R.layout.list_group_element, parent, false)\r\n        return GroupsViewHolder(itemView)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: GroupsViewHolder, position: Int) {\r\n        holder.groupName.text = groupsList[position].groupName\r\n        holder.groupCount.text = groupsList[position].groupCount\r\n        holder.groupImage.setImageResource(groupsList[position].groupImage)\r\n        holder.itemView.setOnClickListener {\r\n            listener.onItemClick(position)\r\n        }\r\n    }\r\n\r\n    override fun getItemCount() = groupsList.size\r\n\r\n    inner class GroupsViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView){\r\n        val groupName: TextView = itemView.findViewById(R.id.groupName)\r\n        val groupCount: TextView = itemView.findViewById(R.id.groupCount)\r\n        val groupImage: ImageView = itemView.findViewById(R.id.imageView)\r\n        val groupElement: ConstraintLayout = itemView.findViewById(R.id.groupElement)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/mapmates/ui/home/GroupsAdapter.kt b/app/src/main/java/com/example/mapmates/ui/home/GroupsAdapter.kt
--- a/app/src/main/java/com/example/mapmates/ui/home/GroupsAdapter.kt	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/java/com/example/mapmates/ui/home/GroupsAdapter.kt	(date 1683186123100)
@@ -10,7 +10,7 @@
 import androidx.recyclerview.widget.RecyclerView
 import com.example.mapmates.R
 
-class GroupsAdapter(private val groupsList: ArrayList<GroupModel>, private val listener: OnItemClickListener) : RecyclerView.Adapter<GroupsAdapter.GroupsViewHolder>() {
+class GroupsAdapter(private var groupsList: ArrayList<GroupModel>, private val listener: OnGroupItemClickListener) : RecyclerView.Adapter<GroupsAdapter.GroupsViewHolder>() {
 
     override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): GroupsViewHolder {
         val itemView = LayoutInflater.from(parent.context).inflate(R.layout.list_group_element, parent, false)
@@ -22,7 +22,7 @@
         holder.groupCount.text = groupsList[position].groupCount
         holder.groupImage.setImageResource(groupsList[position].groupImage)
         holder.itemView.setOnClickListener {
-            listener.onItemClick(position)
+            listener.onGroupItemClick(position)
         }
     }
 
Index: app/src/main/java/com/example/mapmates/ui/home/OnItemClickListener.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/mapmates/ui/home/OnItemClickListener.kt b/app/src/main/java/com/example/mapmates/ui/home/OnGroupItemClickListener.kt
rename from app/src/main/java/com/example/mapmates/ui/home/OnItemClickListener.kt
rename to app/src/main/java/com/example/mapmates/ui/home/OnGroupItemClickListener.kt
--- a/app/src/main/java/com/example/mapmates/ui/home/OnItemClickListener.kt	(revision a1aa383e6ff30bb56adba0794716819b2950a629)
+++ b/app/src/main/java/com/example/mapmates/ui/home/OnGroupItemClickListener.kt	(date 1683185200442)
@@ -1,5 +1,5 @@
 package com.example.mapmates.ui.home
 
-interface OnItemClickListener {
-    fun onItemClick(position: Int)
+interface OnGroupItemClickListener {
+    fun onGroupItemClick(position: Int)
 }
\ No newline at end of file
